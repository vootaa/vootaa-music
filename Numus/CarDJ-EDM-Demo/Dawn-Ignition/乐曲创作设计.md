# Dawn Ignition — 创作设计（优化版）

## 0. 快速摘要（Quick Blueprint）

- 风格：progressive_house（车载优化）
- 总时长：≈25 min，BPM=120，Key=C Major，4/4
- 全局能量轨迹（E）：0.3 → 0.7 → 0.9 → 0.6
- 结构：6 Chapters（每章 3 Sections）
- 核心约束：确定性（π 切片驱动修饰层），骨干实时（Sonic Pi），修饰离线（Python→MIDI→WAV）

## 1. 参数基线（Parameter Scales）

Energy (E) 等级（用于规划 & amp 参考）

- 0.3 very low（pad 氛围）  
- 0.4 low（轻 Kick 介入）  
- 0.5 mid-low（Bass 固化）  
- 0.6 mid（可引入 Snare / noise_rise）  
- 0.7 mid-high（Lead 清晰 + 过渡 FX）  
- 0.8 high（主旋律强化 + 稳态驱动）  
- 0.9 peak（第二抬升高潮层）  

Density (D) 语义：事件/声部主观复合

- 0.2 sparse（单一床 + 稀疏纹理）  
- 0.3 light（2–3 低干扰层）  
- 0.4 moderate（鼓组+pad+bass）  
- 0.5 structured（加入 lead motif）  
- 0.6 pronounced（增加装饰/上升）  
- 0.7 packed（峰值前饱满）  
- 0.65 sustain peak（保持但不再叠加）

声部激活参考表（简化）  
E ≤0.4: pad + light kick  
0.4<E≤0.6: + sub_bass + percussive support  
0.6<E≤0.8: + lead + snare（分层）+ filter sweeps  
E≥0.8: + decor_fx（限制 1–2 角色）  
缓释阶段：逐步撤出 bass 修饰 → 仅留 pad + soft percs  

## 2. 章节总览矩阵（Chapter / Section Summary）

| Chap |    标题         | Section      | Time (mm:ss) | E | D | 角色标签 (主修饰角色) |
|----|------------------|--------------|-------|------|------|---------------------|
| 1  | Gentle Awakening | 1.1 Intro    | 01:00 | 0.30 | 0.20 | ambient_pad_sparkle |
|    |                  | 1.2 Build    | 01:30 | 0.35 | 0.30 | subtle_rise_noise   |
|    |                  | 1.3 Sustain  | 01:30 | 0.40 | 0.25 | gentle_echo_sparkle |
| 2  | Pulse Forming    | 2.1 Intro    | 01:00 | 0.40 | 0.40 | pulse_kick_echo     |
|    |                  | 2.2 Build    | 01:30 | 0.50 | 0.50 | bass_rise_sparkle   |
|    |                  | 2.3 Sustain  | 01:30 | 0.60 | 0.45 | mid_freq_noise      |
| 3  | First Lift       | 3.1 Intro    | 01:00 | 0.60 | 0.50 | lead_sparkle_high   |
|    |                  | 3.2 Build    | 01:30 | 0.70 | 0.60 | rising_lead_noise   |
|    |                  | 3.3 Sustain  | 01:30 | 0.80 | 0.55 | high_energy_echo    |
| 4  | Glide Cruise     | 4.1 Intro    | 01:00 | 0.80 | 0.50 | glide_melody_sparkle|
|    |                  | 4.2 Build    | 01:30 | 0.80 | 0.45 | sparse_noise_rise   |
|    |                  | 4.3 Sustain  | 01:30 | 0.80 | 0.40 | ambient_glide_echo  |
| 5  | Second Lift      | 5.1 Intro    | 01:00 | 0.80 | 0.60 | decor_sparkle_high  |
|    |                  | 5.2 Build    | 01:30 | 0.85 | 0.70 | peak_noise_rise     |
|    |                  | 5.3 Sustain  | 01:30 | 0.90 | 0.65 | intense_echo_sparkle|
| 6  | Soft Release     | 6.1 Intro    | 01:30 | 0.80 | 0.50 | soft_release_sparkle|
|    |                  | 6.2 Build    | 01:30 | 0.70 | 0.40 | fade_noise_echo     |
|    |                  | 6.3 Sustain  | 02:00 | 0.60 | 0.30 | ambient_fade_sparkle|

> 用途：驱动 dawn_ignition_dna.json 生成 & Sonic Pi time gating。

## 3. 基础音乐要素

- Key / Scale：C Major；和弦循环：I–V–vi–IV（C–G–Am–F）
- Pan 范围：−0.5 ~ +0.5（Lead 中心保持 | 装饰微偏）
- 动态目标：峰值 < 0.8FS；车载低频强化（20–100Hz 适度堆叠 Kick+Sub，避免互相遮蔽）

## 4. 确定性 DNA 设计

- 主源：π 小数；起始偏移策略：章节递增分块（示例：Ch1 1000–1199，Ch2 1200–1399 ...）
- 单 Section 典型消耗：≤100 位
- 基础映射：
  digit → (digit % 7) → scale_degree → (octave_set by role)
- 变换链（按序）：
  thin(p=0.5) / shift(+2) / accent(indexes=[...]) / reverse(optional for echo tails)

## 5. 输出路径约定

out/wav/dawn_ignition/&lt;chapter_id&gt;/&lt;section_id&gt;/&lt;role&gt;.wav  
示例：out/wav/dawn_ignition/ch1/sec1/ambient_pad_sparkle.wav

meta（对应 WAV 同目录）：<role>.meta.json  
字段建议：
{
  "track":"dawn_ignition",
  "chapter":"ch1",
  "section":"sec1",
  "role":"ambient_pad_sparkle",
  "source":"pi",
  "pi_slice":"1000-1079",
  "mapping":"digit%7->C_major_degree->oct(5)",
  "transforms":["thin(p=0.5)","shift(+2)"],
  "render":{
    "soundfont":"<id>",
    "synth_patch":"pad_soft_A",
    "bpm":120,
    "length_beats":64
  },
  "version":1
}

## 6. dawn_ignition_dna.json（结构示例片段）

```
{
  "track_id": "dawn_ignition",
  "bpm": 120,
  "key": "C",
  "scale": "major",
  "chapter_allocation": {
    "ch1": {"pi_slice":"1000-1199"},
    "ch2": {"pi_slice":"1200-1399"},
    "ch3": {"pi_slice":"1400-1599"}
  },
  "sections": {
    "ch1_sec1": {
      "role":"ambient_pad_sparkle",
      "pi_sub":"1000-1079",
      "mapping":"digit%7->deg->oct(5)",
      "transforms":["thin(p=0.55)"],
      "density_target":0.20,
      "energy_target":0.30
    },
    "ch1_sec2": {
      "role":"subtle_rise_noise",
      "pi_sub":"1080-1120",
      "mapping":"digit->noise_bandpass_freq( map0-9=400-4k )",
      "transforms":["shift(+1)"]
    }
  }
}
```

## 7. 骨干层分工（Sonic Pi Guideline）

- live_loop :met → master clock
- Kick/Bass：sync :met → maintain four_on_floor，Chapter 1 仅每 4th beat
- Pad：长和弦 (I–V–vi–IV) 每 4 小节回归
- Lead：自 Chapter 3 引入；Chapter 4 稀疏；Chapter 5 再聚焦
- FX Riser：Chapter 2.2, 3.2, 5.2 进入；使用 band-pass noise + filter sweep
- Release：Chapter 6 降低低频（LPF cutoff 渐降；sub amp 线性 → 0）

## 8. 过渡策略

- 章节跨越：能量差 ΔE ≤ 0.2；若 >0.15 则引入 1 个过渡 Section (Build)
- amp 过渡：线性 ramp（每小节调整 ≤0.1）
- Filter Sweep：在 Build→Sustain 前 4 小节 ramp cutoff 200→12k

## 9. 录制策略

- 骨干优先录音点：Chapters 1→2→3（首次完成里程碑）
- 第二阶段：补 5（峰值） + 6（尾声）
- WAV 修饰加载后统一一次性长录制（避免重新生成导致不一致）

## 10. 执行最小任务清单（Phase 1）

1. 建立 dawn_ignition_dna.json（至少包含 ch1/ch2/ch3 前 2 Sections）  
2. 编写 generate_decor.py：
   - 输入：dna.json
   - 读取 pi 切片 → 映射 → MIDI 输出：out/midi/...
   - 调用 FluidSynth → WAV → 写 meta.json
3. 创建 Sonic Pi 脚本 dawn_ignition.rb：
   - live_loop :met
   - Kick（Chapter 1 稀疏 → Chapter 2 固化）
   - Pad 和弦逻辑（4 小节循环）
   - Bass 进入时间点（Chapter 2）
   - 预留数组 decor_samples = [paths...]（手动填）
4. 生成首 2 个修饰 WAV：
   - ambient_pad_sparkle (ch1_sec1)
   - subtle_rise_noise (ch1_sec2)
5. 录制 5 分钟 Demo（覆盖 Chapter 1 & 2 起始）→ 评估密度/低频清晰度
6. 决策：调整 π 偏移或 thin(p) 参数再生成

## 11. 质量检查（Per Iteration）

- 每个使用的 decor 是否有 meta.json？
- 是否存在 E≥0.8 同时 D≥0.65 且 3 个以上 foreground？（如是 → 精简）
- 章节内 Lead 引入是否只发生在 Chapter 3？
- Chapter 6 是否逐步撤离 sub/bass 而非瞬断？

## 12. 原始章节详述（保留原描述 + 轻微结构化）

### Chapter 1 — Gentle Awakening

E: 0.3→0.4 | D: 0.2~0.25  
骨干：soft_pad；轻 Kick（每 4 拍一次）；无 Bass；FX：reverb mix≈0.5  
Sections:

- 1.1 Intro：ambient_pad_sparkle（高频空气填充）
- 1.2 Build：subtle_rise_noise（轻上升噪声，频率 400→2k）
- 1.3 Sustain：gentle_echo_sparkle（延迟尾部点缀）

### Chapter 2 — Pulse Forming

E: 0.4→0.6 | D: 0.4~0.45  
骨干：每拍 Kick；sub_bass 进入；轻度 distortion 0.3  
Sections:

- 2.1 Intro：pulse_kick_echo（Kick 回声交错）
- 2.2 Build：bass_rise_sparkle（低频上升，频率 60→120）
- 2.3 Sustain：mid_freq_noise（中频噪声填充）

### Chapter 3 — First Lift

E: 0.6→0.8；引入 saw_lead + Snare 分层；Filter 扫频  
骨干：saw_lead；Snare 加入；Bass/Pad 强化；FX：filter 扫频  
Sections:

- 3.1 Intro：lead_sparkle_high（高频引导闪烁）
- 3.2 Build：rising_lead_noise（引导噪声上升）
- 3.3 Sustain：high_energy_echo（高能量回声）

### Chapter 4 — Glide Cruise

高位稳定巡航；减少高频噪声；旋律稀疏  
骨干：melody_pad（旋律稀疏）；稳定律动；FX：delay 0.4
Sections:

- 4.1 Intro：glide_melody_sparkle（滑翔旋律闪烁）
- 4.2 Build：sparse_noise_rise（稀疏噪声上升）
- 4.3 Sustain：ambient_glide_echo（氛围滑翔回声）

### Chapter 5 — Second Lift

二次峰值；加入 decor_sparkle_high；reverb+dist 更强  
骨干：装饰（fx_decor）加入；Lead/Bass 高潮；FX：reverb + distortion
Sections:

- 5.1 Intro：decor_sparkle_high（装饰性高频闪烁）
- 5.2 Build：peak_noise_rise（峰值噪声上升）
- 5.3 Sustain：intense_echo_sparkle（强烈回声闪烁）

### Chapter 6 — Soft Release

E: 0.9→0.6 缓释；sub_fade；amp 线性下降；保留 pad 尾气氛围  
骨干：sub_fade（低频回收）；Pad 柔和；FX：fade_out
Sections:

- 6.1 Intro：soft_release_sparkle（柔和释放闪烁）
- 6.2 Build：fade_noise_echo（渐隐噪声回声）
- 6.3 Sustain：ambient_fade_sparkle（氛围渐隐闪烁）

## 13. 变换与映射示例（π → Pitch）

π[1000:1100] → digits  
→ d % 7 → C 大调度数 [0..6] → degree → note  
→ role=‘sparkle’ → octave 5/6 交替（(index % 2)?6:5）  
→ thin(p=0.5)：保留偶数 index  
→ shift(+2)：音高上移大二度

## 14. 未来扩展占位

- 可在 Chapter 4 引入“callback motif” 回溯 Chapter 1 pad 轮廓
- 元数据追加：psycho_tags（如 "airy","warm_low"）

---
（本文件即结构化执行依据；更新需维持章节编号与路径不变）
