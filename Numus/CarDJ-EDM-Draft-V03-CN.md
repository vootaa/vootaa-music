# CarDJ-EDM 技术草案（非工程化精简版） V0.3

本草案用于指导《动感旅途》专辑开发；目标：让阅读者在不看任何实现代码的情况下，即可开始执行“EDM骨干 + MIDI修饰”实验与录制流程。

---

## 1. 项目定位

- 目标：为车载播放场景创作 6 首 20–40 分钟的长篇电子音乐，支持连续播放与单曲体验。
- 核心策略：EDM骨干实时合成（Sonic Pi） + MIDI修饰（离线生成并渲染为 WAV 采样）。
- 原则：音乐与听感优先，工程复杂度最小化；确定性优于随机性；迭代速度优先于框架完备。

---

## 2. 专辑信息（整合）

专辑：Motion Groove《动感旅途》  
场景与曲目：

1. Dawn Ignition（晨启） – 清晨出发 / 渐进能量  
2. Urban Velocity（疾城） – 城市短途 / 强烈鼓动  
3. Endless Lane（无尽车道） – 长途巡航 / 延展 trance 感  
4. Midnight Horizon（午夜地平线） – 夜间驾驶 / 冷色氛围  
5. Station Dreams（驻梦） – 驻车/休息 / Ambient / Chill  
6. Final Ascent（终极攀升） – 抵达前情绪攀升 / 综合回顾  

全局一致特征：

- 低频厚重（适配车内共鸣）、高频细节增强（补偿损耗）、中频简洁避免浑浊。
- 能量曲线跨曲目串联：起 → 推进 → 巡航 → 夜深 → 平静 → 攀升。

---

## 3. 结构层级（核心不可缺）

Album → Track → Chapter → Section（段落） → Layer 组合  

- EDM骨干（Kick / Bass / Pad / Lead / FX / 氛围）
- MIDI修饰层（旋律点缀 / 和声填充 / 装饰音 / 环境短采样）

说明：

- Chapter：宏观叙事模块（如“gentle awakening”）。
- Section：编排时间块（Intro / Build / Drop / Breakdown / Outro 或自定义标签）。
- 每个 Section 只回答两个问题：骨干当前的“能量 + 织体密度”是什么？是否需要装饰层注入？  
- MIDI修饰永远服务骨干，不主导结构。

---

## 4. 工作流程（最小闭环）

阶段 0：确立专辑能量弧线（6 曲宏观位置）。  
阶段 1：选定目标曲（如 Dawn Ignition）→ 写“Track Blueprint”（一句话：起点、峰值、收束）。  
阶段 2：划分 Chapters（2–5 个），每个给出摘要（情绪 / 主色）。  
阶段 3：为每个 Chapter 拆分 Sections（时长 + 功能标签 + 目标能量值）。  
阶段 4：为每个 Section 填“EDM骨干表”：Kick 密度 / Bass 类型 / Pad 和弦走向 / Lead 状态 / FX 氛围动因。  
阶段 5：分析是否需要 MIDI 修饰（仅在以下情境启用）：

- 长时段缺乏旋律兴趣点  
- Drop 前需要预张力  
- Breakdown 需要轻量纹理填补  
- 输出：修饰需求表（元素类型 + 音域建议 + 触发频率 + 纹理角色）

阶段 6：一次性批量生成该 Track 所需的全部修饰素材（MIDI→WAV），命名规范：out/wav/{track}/{chapter}/{section}/{role}.wav。  
阶段 7：在 Sonic Pi 脚本中用显式列表声明要使用的采样路径（手动挑选即可）。  
阶段 8：试听→记录：保留“被证明有效的骨干参数 + 使用过的修饰 WAV 列表 + 决策理由”。  
阶段 9：录制：一气呵成，不在录制时重新生成任何素材。  

---

## 5. MIDI 修饰层定位

功能：  

- “点亮”特定声部窗口（短旋律单元 / 装饰碎片 / 环境色彩）。  
- 稀疏、克制、目的明确。  

不做的事：  

- 不承担主旋律长线（由骨干 Lead 演进处理）  
- 不做无限复杂演化（如需演化，用分批再生成而不是实时调度）  
- 不参与宏观能量叙事（其影响必须边界化）  

需求分析最小字段（示例模板，不是代码）：  
Section ID / 时间范围 / 背景和弦 / 可用频段 / 期待情绪功能 / 修饰类型（从：短旋律 | 和声垫补 | 环境纹理 | 上升噪声 | 反向扫） / 触发密度（稀疏 / 中等 / 单次） / 退出条件。  

---

## 6. 确定性策略（执行层统一约束）

- 有限数学源：π / φ / e / Fibonacci / 简单正余弦组合 → “索引 + 截取”生成序列。
- 每次批量生成写 metadata（JSON）：包含：源常数标识 / 偏移 / 采样长度 / 映射规则描述。
- 不使用非确定性随机；需要“随机感”→ 使用序列切片漂移（步长固定可复现）。
- 命名要求：所有输出 WAV 必须可从文件名还原来源（track+chapter+section+role+序列偏移）。

---

## 7. 能量与织体控制

三个量：  

1) Energy（主观强度）  
2) Density（并行声部数量感）  
3) Focus（听觉注意力聚焦点：低频 / 中频节奏 / 旋律 / 氛围）  

约束：同一 Section 内同时高 Energy + 高 Density + 频繁修饰 → 禁止。  
演进方式：跨 Section 只允许一次改变两个量，不允许三项同时跳变。  

---

## 8. 车载优化要点（只保留指导性）

- 低频：Sub 与 Kick 不重占（避免过压缩膨胀）→ 控制一个主低频支点。  
- 中频：旋律与和声避免 250–500Hz 叠加；Pad 适当削薄。  
- 高频：使用装饰采样补偿空气感，不通过全局 EQ 过推。  
- 空间：前景（Kick/Bass/Lead）稳定居中，氛围环绕元素使用左右摆动/混响。  
- 动态：不追求商业响度，保持行车环境“清晰但不疲劳”。

---

## 9. 演化模式（Macro / Meso / Micro）

- Macro：Chapter 级能量形态（2–5 个节点）。  
- Meso：Section 级：骨干参数变体（鼓型 + Bass 滤波 + Lead 波形态）。  
- Micro：单循环内的轻微参数抖动（<±5%），或用两份预制采样交替。  
- Memory & Callback：在 Final Ascent 回调前三曲主题（简化版 4 小节）。  

---

## 10. 实验与决策流程

一次实验包包含：  

- 目标 Section  
- 修改意图（例如：提升铺垫张力）  
- 改动点（骨干参数 / 新修饰采样）  
- 试听记录：好 / 中 / 弃 + 一句话原因  
保留结果：只长期保存“好”与少量“中”备选；删除“弃”对应采样与记录。  

---

## 11. 最小工具清单（第一阶段只需这些）

- 简单序列取样脚本（读取 π 字符串截取 → 数值映射音高 / 时间间隔）  
- MIDI→WAV 渲染命令（FluidSynth 单行命令即可）  
- Sonic Pi 播放脚本：显式列表加载 WAV → 手写骨干循环  
- 录制：Sonic Pi 内置录制；手动标记开始/结束  
不需要：类系统 / 插件框架 / 抽象层。  

---

## 12. 排除项（防止偏航）

不做：  

- 动态加载模块、热插拔插件  
- 复杂多线程调度  
- 自动混音/母带  
- 复杂自适应参数搜索  
- Web 可视化控制台  
- 全量元数据库  

---

## 13. 质量检查清单（每曲完成前自检）

- 章节 & 段落定义是否最小充分？  
- 是否出现“修饰层掩盖骨干”情况？  
- 是否有未在能量规划表登记的能量突增？  
- 是否所有生成 WAV 都有 meta 记录？  
- 是否任意 5 分钟内出现>2 次“高 Energy + 高 Density + 旋律 + FX”叠加？（若是 → 精简）  
- Dawn Ignition 是否在 5、10、15、终点 4 个时间戳上可感知清晰演进节点？  

---

## 14. Dawn Ignition 初始蓝图（可立即执行）

Chapters（示例）：  

1) Gentle Awakening（铺陈 / 低能量 / 轻 Pad）  
2) Pulse Forming（Kick 固化 / Bass 进入 / 预热）  
3) First Lift（第一次能量抬升 / Lead 简单动机）  
4) Glide Cruise（稳定巡航 / 旋律稀疏）  
5) Second Lift（更高峰 / 加入短修饰）  
6) Soft Release（能量缓释 / 回收低频）  

首轮仅实现前 3 个 Chapters：  
完成标准：  

- 每个 Section 有明确能量标签  
- 每段骨干在 Sonic Pi 中手写可运行  
- 至多 3 个修饰 WAV（不追求多）  

---

## 15. 下一步行动（Actionable）

1) 写 Dawn Ignition Chapter 1–3 结构表（文本）。  
2) 手写骨干节奏循环（不生成任何自动化代码）。  
3) 只生成 1 组装饰：高音短音（稀疏），上升噪声（一次性），环境纹理（循环）。  
4) 录制 5 分钟 Demo → 听感评估 → 决定是否扩展 Chapter 4。  

---

本草案结束：足以启动专辑首曲实验；不再引入工程复杂度，后续只补充“结构表 + 元数据记录”。
