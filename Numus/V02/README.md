# Numus Engine V2.0 - é•¿ç¯‡è½¦è½½ EDM ç”Ÿæˆç³»ç»Ÿ

> æ•°å­¦é©±åŠ¨ã€éŸ³ä¹æ€§ä¼˜å…ˆã€ä¸ªäººåŒ–å®éªŒçš„è‡ªåŠ¨ä½œæ›²å¼•æ“  
> ä¸“ä¸ºé•¿ç¯‡è½¦è½½ EDM ä½œå“è®¾è®¡

## ğŸµ ç³»ç»Ÿæ¦‚è¿°

Numus Engine V2.0 æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºç”Ÿæˆé•¿ç¯‡è½¦è½½ EDM ä½œå“çš„éŸ³ä¹ç³»ç»Ÿã€‚å®ƒé‡‡ç”¨ç¡®å®šæ€§çš„æ•°å­¦åºåˆ—ï¼ˆÏ€ã€eã€Ï†ï¼‰é©±åŠ¨éŸ³ä¹ç”Ÿæˆï¼Œç»“åˆä¸“ä¸šçš„ DJ è¿‡æ¸¡æŠ€æœ¯ï¼Œä¸ºè½¦è½½ç¯å¢ƒä¼˜åŒ–éŸ³é¢‘è¡¨ç°ã€‚

### æ ¸å¿ƒç‰¹æ€§

- **ğŸ”¢ ç¡®å®šæ€§ç”Ÿæˆ**: åŸºäº Ï€ã€eã€Ï† ç­‰æ•°å­¦å¸¸æ•°ï¼Œæ‹’ç»éšæœºæ€§
- **ğŸš— è½¦è½½ä¼˜åŒ–**: é’ˆå¯¹ä¸åŒè½¦å‹çš„éŸ³å“ç³»ç»Ÿä¼˜åŒ–
- **ğŸª ç« èŠ‚åŒ–æ¶æ„**: 8ä¸ªç‹¬ç«‹ç« èŠ‚ï¼Œä¸“ä¸š DJ è¿‡æ¸¡è¡”æ¥
- **ğŸ›ï¸ Section åº“**: ä¸°å¯Œçš„ EDM ç´ æç‰‡æ®µåº“
- **ğŸ¨ MIDI è£…é¥°**: åŠ¨æ€ç”Ÿæˆè£…é¥°é‡‡æ ·ï¼Œä¸°å¯ŒéŸ³ä¹å±‚æ¬¡
- **âš¡ å®æ—¶æ§åˆ¶**: Python OSC ä¸»æ§ + Sonic Pi æ’­æ”¾å™¨

## ğŸ“ æ–‡ä»¶ç»“æ„

```
Numus/V02/
â”œâ”€â”€ engine/
â”‚   â”œâ”€â”€ numus_engine.py      # æ ¸å¿ƒå¼•æ“
â”‚   â”œâ”€â”€ section_library.py   # Section ç´ æåº“
â”‚   â”œâ”€â”€ dj_transitions.py    # DJ è¿‡æ¸¡æœºåˆ¶
â”‚   â”œâ”€â”€ math_generator.py    # æ•°å­¦åºåˆ—ç”Ÿæˆ
â”‚   â”œâ”€â”€ midi_renderer.py     # MIDI æ¸²æŸ“
â”‚   â””â”€â”€ numus_player.rb      # Sonic Pi æ’­æ”¾å™¨
â”œâ”€â”€ sections/
â”‚   â””â”€â”€ sections_config.json # Section é…ç½®åº“
â”œâ”€â”€ tracks/
â”‚   â””â”€â”€ dawn_ignition.json   # Dawn Ignition é…ç½®
â”œâ”€â”€ output/
â”‚   â”œâ”€â”€ wav/                 # æ¸²æŸ“è¾“å‡º
â”‚   â””â”€â”€ logs/                # æ‰§è¡Œæ—¥å¿—
â””â”€â”€ README.md               # æ“ä½œè¯´æ˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

#### ç³»ç»Ÿè¦æ±‚

- macOS æˆ– Linux
- Python 3.8+
- Sonic Pi 4.0+
- FluidSynth

#### å®‰è£…ä¾èµ–

```bash
# Python ä¾èµ–
pip install pythonosc pretty_midi numpy

# macOS å®‰è£… FluidSynth
brew install fluidsynth

# Linux å®‰è£… FluidSynth  
sudo apt-get install fluidsynth
```

#### æ£€æŸ¥ SoundFont

ç¡®ä¿ `Numus/SF/FluidR3_GM.sf2` æ–‡ä»¶å­˜åœ¨ã€‚

### 2. å¯åŠ¨æ’­æ”¾

#### ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨ Sonic Pi

1. æ‰“å¼€ Sonic Pi åº”ç”¨
2. åŠ è½½æ–‡ä»¶ï¼š`Numus/V02/engine/numus_player.rb`
3. ç‚¹å‡»è¿è¡Œï¼Œç­‰å¾…æ˜¾ç¤º"Numus æ’­æ”¾å¾ªç¯å·²å¯åŠ¨"

#### ç¬¬äºŒæ­¥ï¼šè¿è¡Œå¼•æ“

```bash
cd Numus/V02
python engine/numus_engine.py
```

#### ç¬¬ä¸‰æ­¥ï¼šé€‰æ‹©é…ç½®

```
é€‰æ‹©è½¦è½½é…ç½® (sedan_standard/suv_premium/sports_car) [å›è½¦é»˜è®¤]: sports_car
å·²åŠ è½½ä½œå“: Dawn Ignition
ä¸“è¾‘: Motion Groove
ç« èŠ‚æ•°: 8

å¼€å§‹é¢„å¤„ç†...
åˆ†é… Section æ¨¡æ¿...
  ç« èŠ‚ 1: ambient_intro (ambient)
  ç« èŠ‚ 2: house_foundation (deep_house)
  ...
é¢„æ¸²æŸ“è£…é¥°é‡‡æ ·...
  ç« èŠ‚ 1: 2 ä¸ªè£…é¥°é‡‡æ ·
  ...
é¢„å¤„ç†å®Œæˆ

æŒ‰å›è½¦å¼€å§‹æ’­æ”¾ Dawn Ignition...
```

### 3. æ’­æ”¾ä½“éªŒ

æ’­æ”¾å¼€å§‹åï¼Œä½ å°†ä½“éªŒåˆ°ï¼š

```
============================================================
ğŸµ å¼€å§‹æ’­æ”¾: Dawn Ignition
ğŸš— è½¦è½½é…ç½®: sports_car
â±ï¸  é¢„è®¡æ—¶é•¿: 22.3 åˆ†é’Ÿ
============================================================

ğŸª ç« èŠ‚ 1: Gentle Awakening
   â³ æ’­æ”¾æ—¶é•¿: 102.4 ç§’

ğŸª ç« èŠ‚ 2: Pulse Forming
æ‰§è¡Œè¿‡æ¸¡: energy_crossfade (8 å°èŠ‚)
   â³ æ’­æ”¾æ—¶é•¿: 102.4 ç§’
   ğŸ¨ è£…é¥°: pad

...

ğŸ‰ æ’­æ”¾å®Œæˆï¼å®é™…æ—¶é•¿: 22.1 åˆ†é’Ÿ
```

## ğŸ›ï¸ è½¦è½½éŸ³é¢‘é…ç½®

### å¯ç”¨é…ç½®æ–‡ä»¶

#### sedan_standard (é»˜è®¤)

- **é€‚ç”¨**: æ™®é€šè½¿è½¦æ ‡å‡†éŸ³å“
- **ä½éŸ³å¢å¼º**: 1.2x
- **ä¸­é¢‘æ¸…æ™°åº¦**: 1.0x  
- **é«˜é¢‘å¢å¼º**: 1.1x

#### suv_premium

- **é€‚ç”¨**: SUV é«˜çº§éŸ³å“ç³»ç»Ÿ
- **ä½éŸ³å¢å¼º**: 1.1x
- **ä¸­é¢‘æ¸…æ™°åº¦**: 1.1x
- **é«˜é¢‘å¢å¼º**: 1.0x

#### sports_car

- **é€‚ç”¨**: è·‘è½¦éŸ³å“ç³»ç»Ÿ
- **ä½éŸ³å¢å¼º**: 1.3x
- **ä¸­é¢‘æ¸…æ™°åº¦**: 0.9x
- **é«˜é¢‘å¢å¼º**: 1.2x

### æ‰‹åŠ¨è®¾ç½®é…ç½®

åœ¨ä»£ç ä¸­ä¿®æ”¹ï¼š

```python
engine.set_car_audio_profile("sports_car")
```

## ğŸª ä½œå“ç»“æ„è§£æ

### Dawn Ignition ç« èŠ‚è®¾è®¡

| ç« èŠ‚ | åç§° | æ—¶é•¿ | èƒ½é‡ | é£æ ¼ | è½¦è½½ç‰¹ç‚¹ |
|------|------|------|------|------|----------|
| 1 | Gentle Awakening | 2.7min | 0.1â†’0.3 | Ambient | ä¸­é¢‘æ¸…æ™°ï¼Œé€‚åˆæ¸…æ™¨ |
| 2 | Pulse Forming | 2.7min | 0.3â†’0.5 | Deep House | å¼•å…¥ä½é¢‘æµ‹è¯• |
| 3 | Energy Rise | 4.1min | 0.5â†’0.7 | Trance | å¢åŠ ç«‹ä½“å£°å±‚æ¬¡ |
| 4 | Peak Drive | 5.5min | 0.7â†’0.9 | Progressive | å…¨é¢‘æ®µä½“éªŒ |
| 5 | Sustained Cruise | 6.8min | 0.8â†’0.8 | Progressive | é«˜é€Ÿå·¡èˆªç¨³å®šè¾“å‡º |
| 6 | Emotional Breakdown | 4.1min | 0.8â†’0.4 | Breakdown | ä¸­é«˜é¢‘æƒ…æ„Ÿè¡¨è¾¾ |
| 7 | Final Ascent | 5.5min | 0.4â†’0.95 | Festival | æœ€å¼ºèƒ½é‡è¾“å‡º |
| 8 | Dawn Complete | 2.7min | 0.9â†’0.2 | Ambient | æ¸©å’Œç»“æŸ |

### DJ è¿‡æ¸¡æŠ€æœ¯

- **Energy Crossfade**: èƒ½é‡å¹³æ»‘è¿‡æ¸¡
- **Filter Sweep**: æ»¤æ³¢å™¨æ‰«é¢‘è¿‡æ¸¡
- **Breakdown Build**: åˆ†è§£é‡å»ºè¿‡æ¸¡
- **Impact Drop**: å†²å‡»é™è½è¿‡æ¸¡

## ğŸ”§ è‡ªå®šä¹‰é…ç½®

### åˆ›å»ºæ–°ä½œå“

1. å¤åˆ¶ `tracks/dawn_ignition.json`
2. ä¿®æ”¹ç« èŠ‚é…ç½®ï¼š

   ```json
   {
     "name": "Your Track Name",
     "chapters": [
       {
         "id": "your_chapter",
         "name": "Your Chapter Name", 
         "duration_bars": 32,
         "energy_start": 0.2,
         "energy_end": 0.6,
         "style_hint": "deep_house",
         "elements": ["kick", "bass", "pad"]
       }
     ]
   }
   ```

3. åŠ è½½æ–°ä½œå“ï¼š

   ```python
   engine.load_track("tracks/your_track.json")
   ```

### æ·»åŠ æ–° Section

ç¼–è¾‘ `sections/sections_config.json`ï¼š

```json
{
  "section_library": {
    "your_section": {
      "style": "your_style",
      "energy_range": [0.4, 0.8],
      "elements": {
        "kick": {
          "sample": ":bd_your_kick",
          "pattern": [1, 0, 0, 0, 1, 0, 0, 0],
          "car_boost": 1.2
        }
      }
    }
  }
}
```

## ğŸ¨ æ•°å­¦åºåˆ—è¯´æ˜

### ç¡®å®šæ€§ç”ŸæˆåŸç†

Numus ä½¿ç”¨æ•°å­¦å¸¸æ•°çš„å°æ•°ä½é©±åŠ¨éŸ³ä¹ç”Ÿæˆï¼š

- **Ï€ (åœ†å‘¨ç‡)**: ä¸»è¦ç”¨äºèƒ½é‡æ›²çº¿å’Œè£…é¥°è§¦å‘
- **e (è‡ªç„¶å¸¸æ•°)**: ç”¨äºå’Œå£°è¿›è¡Œå’ŒèŠ‚å¥å˜åŒ–  
- **Ï† (é»„é‡‘æ¯”ä¾‹)**: ç”¨äºæ—‹å¾‹ç”Ÿæˆå’Œæ—¶é—´ç»“æ„

### åºåˆ—ä½¿ç”¨ç¤ºä¾‹

```python
# è·å– Ï€ åºåˆ—ç‰‡æ®µ
pi_sequence = generator.get_sequence("pi", start=100, length=50)

# ç”Ÿæˆè£…é¥°è§¦å‘ç‚¹
triggers = generator.generate_ornament_triggers(chapter_idx=2, bars=32)

# ç”Ÿæˆèƒ½é‡æ›²çº¿
energy_curve = generator.generate_energy_curve(chapters)
```

## ğŸš— è½¦è½½é©¾é©¶å»ºè®®

### æœ€ä½³è†å¬ç¯å¢ƒ

- **æ—¶æ®µ**: æ¸…æ™¨å‡ºå‘ï¼Œé•¿é€”é©¾é©¶
- **éŸ³é‡**: ä¸­ç­‰éŸ³é‡ï¼Œç¡®ä¿å®‰å…¨é©¾é©¶
- **ç¯å¢ƒ**: é«˜é€Ÿå…¬è·¯æˆ–å¼€é˜”é“è·¯

### ç« èŠ‚ç‰¹è‰²ä½“éªŒ

1. **Gentle Awakening**: æ¸©å’Œå¯åŠ¨ï¼Œé€‚åˆå‡ºå‘å‰çƒ­è½¦
2. **Pulse Forming**: å¼€å§‹ä¸Šè·¯ï¼Œå»ºç«‹èŠ‚å¥æ„Ÿ
3. **Energy Rise**: è¿›å…¥çŠ¶æ€ï¼Œé€æ­¥åŠ é€Ÿ
4. **Peak Drive**: é«˜é€Ÿé©¾é©¶ï¼Œäº«å—éŸ³ä¹ä¸é€Ÿåº¦
5. **Sustained Cruise**: ç¨³å®šå·¡èˆªï¼Œæ”¾æ¾èº«å¿ƒ
6. **Emotional Breakdown**: æƒ…æ„Ÿé‡Šæ”¾ï¼Œä½“éªŒéŸ³ä¹æ·±åº¦
7. **Final Ascent**: æœ€åå†²åˆºï¼Œåˆ°è¾¾ç›®çš„åœ°å‰çš„å…´å¥‹
8. **Dawn Complete**: å¹³é™ç»“æŸï¼Œå®‰å…¨åˆ°è¾¾

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. FluidSynth æœªæ‰¾åˆ°

```bash
é”™è¯¯: æœªæ‰¾åˆ° fluidsynth å‘½ä»¤
```

**è§£å†³**: å®‰è£… FluidSynth

```bash
# macOS
brew install fluidsynth

# Ubuntu/Debian  
sudo apt-get install fluidsynth
```

#### 2. SoundFont æ–‡ä»¶ç¼ºå¤±

```bash
è­¦å‘Š: SoundFont æ–‡ä»¶ä¸å­˜åœ¨
```

**è§£å†³**: ç¡®ä¿ `Numus/SF/FluidR3_GM.sf2` å­˜åœ¨

#### 3. Sonic Pi è¿æ¥å¤±è´¥

```bash
OSC è¿æ¥é”™è¯¯
```

**è§£å†³**:

1. ç¡®ä¿ Sonic Pi æ­£åœ¨è¿è¡Œ
2. æ£€æŸ¥ OSC ç«¯å£è®¾ç½®ï¼ˆé»˜è®¤ 4560ï¼‰
3. é‡å¯ Sonic Pi

#### 4. è£…é¥°é‡‡æ ·æ¸²æŸ“å¤±è´¥

```bash
æ¸²æŸ“è£…é¥°éŸ³å¤±è´¥
```

**è§£å†³**:

1. æ£€æŸ¥ output/wav ç›®å½•æƒé™
2. ç¡®è®¤ FluidSynth æ­£å¸¸å·¥ä½œ
3. æ£€æŸ¥ç£ç›˜ç©ºé—´

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è¯¦ç»†æ—¥å¿—ï¼š

```python
import logging
logging.basicConfig(level=logging.DEBUG)
```

**Numus Engine V2.0** - è®©æ•°å­¦ä¸éŸ³ä¹åœ¨è½¦è½½ç©ºé—´ä¸­å®Œç¾èåˆ ğŸµğŸš—
